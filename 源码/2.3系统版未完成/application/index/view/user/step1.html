{include file="user/member"}
<ul class="step">
  <li class="step-item active">
    <a href="#" class="tooltip" data-tooltip="注册">注册</a>
  </li>
  <li class="step-item">
    <a href="#" class="tooltip" data-tooltip="报名">报名</a>
  </li>
  <li class="step-item">
    <a href="#" class="tooltip" data-tooltip="参赛">参赛</a>
  </li>
  <li class="step-item">
    <a href="#" class="tooltip" data-tooltip="领奖">领奖</a>
  </li>
</ul>
<div class="columns">
  <div class="column col-9 col-sm-12">
    <form class="form-horizontal" id="signupForm" action="{:url('user/signup')}" method="POST">
      <div class="form-group">
        <div class="col-12">
          <input type="hidden" id="match_status" name="match_status" value="1">
          <input class="form-input" type="email" id="email" placeholder="Email" name="email">
        </div>
      </div>

      <div class="form-group">
        <div class="col-12">
          <div class="input-group">
            
            <input type="tel" class="form-input" id="tel" placeholder="tel" name="tel">
            <button class="btn btn-primary input-group-btn" id="send_code" onclick="sendCode()" ><span style="color: white;" id="button">获取验证码</span></button>
          </div>
        </div>
      </div>
      <div class="form-group columns">
        
        <div class="column col-6">
          <div class="input-group">
            
            <input type="number" class="form-input" placeholder="code" >
            
          </div>
        </div>
        <div class="column col-6 col-mr-auto"> 
          <label class="form-switch ">
            <input type="checkbox"  id="is_join" name="is_join">
            <i class="form-icon"></i>申请参赛
          </label>
        </div>
      </div>
      
      <div class="form-group">
          <label class="form-checkbox">
            <input type="checkbox" " id="agree_value">
            <i class="form-icon"></i> 我同意<a href="#example-modal-3" class="btn btn-link">《SUSTsport应用协议》</a>
          </label>
       
      </div>
      <button class="btn btn-block" id="send" type="submit">Submit</button>
      
    </form>
    <div class="modal modal-lg" id="example-modal-3">
      <a href="#modals-sizes" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container" role="document">
        <div class="modal-header">
          <a href="#modals-sizes" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">《SUSTsport应用协议》</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <p>1.自觉遵纪守法，倡导社会公德，促进绿色网络建设；</p>
            <p>2.提倡先进文化，摒弃消极颓废，促进网络文明健康；</p>
            <p>3.提倡自主创新，摒弃盗版剽窃，促进网络应用繁荣；</p>
            <p>4.提倡互相尊重，摒弃造谣诽谤，促进网络和谐共处；</p>
            <p>5.提倡诚实守信，摒弃弄虚作假，促进网络安全可信；</p>
            <p>6.提倡社会关爱，摒弃低俗沉迷，促进少年健康成长；</p>
            <p>7.提倡公平竞争，摒弃尔虞我诈，促进网络百花齐放；</p>
            <p>8.提倡人人受益，消除数字鸿沟，促进信息资源共享。</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{include file="common/footer"}
<script type="text/javascript">
function sendCode(){  
var tel=document.getElementById("tel").value;  
var send_code=document.getElementById("send_code").value; 
  $.ajax({  
  url:'signup',  
  data:{'tel':tel},//传入后台参数  
  type:"POST", 
  dataType:"Json",  
  success:function(data){  
    // var dataObj=JSON.parse(data);//对字符串形式的json解析为对象  
    // console.log(dataObj.result); 

   }  
  });
  countButton(60);
}  
/**
 *计时t秒，button文字翻转
 */
function countButton(t){
  if(t>0){
      $('#send_code').attr('disabled',"true");
      document.getElementById("button").innerHTML=t+'s后重新获取';
      t--
      setTimeout(function(){countButton(t);},1000); //递归调用计数
    }
    else {
      $('#send_code').removeAttr("disabled");
      document.getElementById("button").innerHTML='获取验证码';
    }
}

//error:不能翻转
function agree(){
  
  var agree_value=true;
  
  if (agree_value) {
    $('#submit').removeAttr("disabled");
    
  }
  else {
    $('#submit').attr('disabled',"true");
  }
}
</script>
